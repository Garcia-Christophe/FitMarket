# Image gradle avec le jdk17
image: gradle:7.3.3-jdk17-alpine

# Etapes du pipeline
stages:
  - âš™ï¸ Build
  - ğŸ§ª Test
  - ğŸš€ Deploy

# Build
build-job:
  stage: âš™ï¸ Build
  script:
    - echo "Compilation du code..."
    - echo "Compilation terminÃ©e."

# Test : web
test-web:
  stage: ğŸ§ª Test
  allow_failure: false
  script:
    - echo "Tests de la partie web..."
    - |
      if grep -q "port: 3000" ./fitmarket/vite.config.mjs; then
        echo "Le port de l'application web est bien 3000."
      else
        echo "Le port de l'application web n'est pas 3000 !"
        exit 1
      fi

# Deploy
deploy-job:
  stage: ğŸš€ Deploy
  environment: production
  script:
    - echo "DÃ©ploiement de l'application..."
    - echo "Application dÃ©ployÃ©e avec succÃ¨s."
